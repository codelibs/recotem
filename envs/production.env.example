# ============================================
# PostgreSQL — REQUIRED
# ============================================
POSTGRES_USER=recotem_user
POSTGRES_PASSWORD=CHANGE_ME
POSTGRES_DB=recotem
PGDATA=/var/lib/postgresql/data/pgdata
DATABASE_URL=postgresql://recotem_user:CHANGE_ME@db:5432/recotem

# ============================================
# Security — REQUIRED
# ============================================
# Generate a strong secret key with:
#   python -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())'
SECRET_KEY=CHANGE_ME
DEBUG=false
# REQUIRED: set to your actual domain name(s), comma-separated
ALLOWED_HOSTS=your-domain.example.com
DEFAULT_ADMIN_PASSWORD=very_bad_password

# HTTPS settings
# WARNING: For any internet-facing deployment, set ALL of these to true
# to prevent session hijacking and CSRF token theft over unencrypted connections.
# SECURE_SSL_REDIRECT=true
# SESSION_COOKIE_SECURE=true
# CSRF_COOKIE_SECURE=true
# SECURE_HSTS_SECONDS=31536000

# ============================================
# Redis — REQUIRED
# ============================================
CELERY_BROKER_URL=redis://redis:6379/0
CHANNELS_REDIS_URL=redis://redis:6379/1
CACHE_REDIS_URL=redis://redis:6379/2
CACHE_KEY_PREFIX=recotem
# Set a password if Redis is network-accessible (optional for Docker internal network):
REDIS_PASSWORD=

# ============================================
# Auth (optional)
# ============================================
# JWT access token lifetime in seconds (default 300 = 5 minutes)
# ACCESS_TOKEN_LIFETIME=300

# ============================================
# Rate Limiting (optional)
# ============================================
THROTTLE_ANON_RATE=20/min
THROTTLE_USER_RATE=100/min
THROTTLE_LOGIN_RATE=5/min
THROTTLE_RECOMMENDATION_RATE=30/min

# ============================================
# CORS/CSRF (optional — for split frontend/backend deployments)
# ============================================
# CORS_ALLOWED_ORIGINS=https://app.example.com
# CSRF_TRUSTED_ORIGINS=https://app.example.com

# ============================================
# Logging (optional)
# ============================================
# LOG_LEVEL=INFO
# DJANGO_LOG_LEVEL=WARNING
# CELERY_LOG_LEVEL=INFO

# ============================================
# Celery Worker Limits (optional)
# ============================================
CELERY_TASK_TIME_LIMIT=3600
CELERY_TASK_SOFT_TIME_LIMIT=3480

# ============================================
# Database Connection Pooling (optional)
# ============================================
# CONN_MAX_AGE=600

# ============================================
# Upload / Cache Limits (optional)
# ============================================
# DATA_UPLOAD_MAX_MEMORY_SIZE=524288000
# MODEL_CACHE_SIZE=8

# ============================================
# Model Security (optional)
# ============================================
# Set to false after running 'manage.py resign_models' to reject unsigned model files.
# PICKLE_ALLOW_LEGACY_UNSIGNED=true

# ============================================
# Storage (optional)
# ============================================
# Where uploaded data files are stored. Must match the Docker volume mount path.
MEDIA_ROOT=/data

# ============================================
# Storage — optional S3
# ============================================
# RECOTEM_STORAGE_TYPE=S3
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_STORAGE_BUCKET_NAME=recotem-models
# AWS_S3_ENDPOINT_URL=

# ============================================
# Frontend (optional — when served separately)
# ============================================
# VITE_API_BASE_URL=https://api.example.com/api/v1
# VITE_WS_BASE_URL=wss://api.example.com/ws
